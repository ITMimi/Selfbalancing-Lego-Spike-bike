# Entwicklung / Probleme / Troubleshooting

## Bauweise

Unser Ziel war es, ein selbstausbalancierendes Motorrad mithilfe des Lego-Spike-Sets zu bauen. Während der ersten Recherche sind wir auf den YouTube Kanal [Creator Academy Australia](https://www.youtube.com/@CreatorAcademyAustralia) gestoßen. Dort gibt es [3 Videos](08-Quellen.md) zu der Entwicklung eines solchen Motorrads. Wir haben damit begonnen eine eigene Bauweise für einen ersten Prototypen zu entwickeln. Dabei ist uns schnell aufgefallen, dass eine kompakte Bauweise sehr entscheidend ist, um das Motorrad später ausbalancieren zu können. Nachdem unsere ersten Prototypen viel zu lang und unkompakt waren, entschieden wir, uns an der Bauweise von [Creator Academy Australia](https://www.youtube.com/@CreatorAcademyAustralia) zu orientieren und das Motorrad erst einmal nachzubauen. Eine von uns dazu erstellte [Bauanleitung](02-Bauanleitung.md) im Lego-Stil, sowie eine [CAD-Modell](03-CAD-Modell.md) sind in diesem Repository verfügbar.   

## Programmierung

Auch bei der Programmierung haben wir uns an dem [Programmier-Tutorial](https://www.youtube.com/watch?v=TupLmKkHMBU&t=0s) von der [Creator Academy Australia](https://www.youtube.com/watch?v=MCVW2Uqanlw) orientiert. Dabei sind wir auf verschiedene Probleme gestoßen. Im ersten Schritt haben wir den Code übernommen und geschaut, ob das Motorrad direkt in der Lage ist sich selbst auszubalancieren. Das war nicht der Fall. Das Motorrad ist in fast allen Testläufen nach wenigen Zentimetern umgekippt. In wenigen Testläufen war das Motorrad in der Lage wenige Meter zu fahren, was jedoch daran lag, dass das Motorrad sehr lange aufrecht blieb und keine Lenkbewegungen notwendig waren. Wir vermuteten, dass die Lenkbewgungen zu stark und zu ruckartig ausgeführt wurden. Daher haben wir die Parameter (Kh, Kd, etc.) systematisch variiert und geschaut, welche Veränderungen zur einer erhöhten Stabilität des Motorrad führten. Unser Ziel war es, die Parameter schrittweise so anzupassen, dass die Lenkbewegungen langsamer bzw. sanfter ausgeführt werden. Die besten Ergebnisse erzielten wir durch die Reduzierung des Wertes "Kp", welcher den Fehler, also den Kippwinkel (Roll-Winkel), gewichtet. Am Ende hat eine Halbierung des Wertes von *2* auf *1* den besten Erfolg gebracht. Außerdem stellten wir fest, dass die Variable "Integral" nicht notwendig für die Balancierung ist, jedoch etwas zur Stabilität beiträgt.  

Während der Tests stellten wir fest, dass die Variablen nach dem Beenden des Programms auf dem Roboter nicht zurückgesetzt wurden. Dadurch waren die Startwerte falsch und die Balancierung hat nicht mehr funktioniert. Wir haben das Problem gelöst, wie bereits [hier](04-Code_Balancierung.md#Reset) beschrieben, in dem wir die Variablen im Code zu Beginn des Programms manuell zurücksetzten.    

## Controller-Steuerung

Nachdem das Motorrad in der Lage war, sich selbst auszubalancieren, haben wir versucht eine Controller-Steuerung zu implementieren. Dabei sind wir leider auf verschiedene Probleme gestoßen, welche wir aus zeitlichen Gründen nicht mehr lösen konnten. Am entscheidensten war der Unterschied vom Download- zum Streaming-Modus. Der Streaming-Modus ist notwendig, um die Controller-Inputs registrieren und verarbeiten zu können. Während die Balancierung im Download-Modus, problemlos funktioniert, ist das Motorrad im Streaming-Modus bei gleichem Code nicht mehr in der Lage zu stabil fahren.  

## Connection zwischen Hub und Computer

Troubleshooting nicht Connecten des Hubs in der Mindstorm App: Es ist anzumerken, dass es beim Bluetooth-Verbinden des aktualsierten Hubs (grün leuchtender Ring) Schwierigkeiten in der Mindstorms App gab. Daher mussten wir den Hub Downgraden -> Siehe link https://spikelegacy.legoeducation.com/hubdowngrade/#step-1 , um ihn dann in der Mindstorms App zu verbinden und dort erneut zu aktualisieren. Danach funktionierte des Bluetooth-Verbinden in der Spike und Mindstorm App problemlos.
